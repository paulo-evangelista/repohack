# Story 1.1: Project Setup and Next.js Foundation

## Status
Draft

## Story
**As a** developer,
**I want** a properly configured Next.js 14+ project with app directory structure,
**so that** I have a solid foundation for building the security scanning application.

## Acceptance Criteria
1. Next.js 14+ project is created with app directory structure
2. Project uses TypeScript for type safety
3. Basic project structure includes app/, components/, lib/, and utils/ directories
4. Package.json includes necessary dependencies for development
5. Git repository is initialized with proper .gitignore
6. Project can be run locally with `pnpm dev`
7. Basic health-check route at `/api/health` returns JSON `{ "status": "ok" }`

## Tasks / Subtasks
- [x] Initialize Next.js 14+ project with App Router (AC: 1, 2)
  - [x] Configure TypeScript during create process (AC: 2) [Source: architecture/technical-stack.md#frontend-technologies]
  - [x] Add Tailwind CSS setup (AC: 4) [Source: architecture/technical-stack.md#frontend-technologies]
- [x] Create base project structure (AC: 3)
  - [x] Add folders and files per structure (AC: 3) [Source: architecture/file-structure.md]
- [x] Configure package.json and tooling (AC: 4)
  - [x] Add pnpm, ESLint, Prettier configs (AC: 4) [Source: architecture/technical-stack.md#development-tools]
- [x] Initialize git repository (AC: 5)
  - [x] Add appropriate .gitignore (AC: 5)
- [x] Add health check route `/api/health` (AC: 7)
  - [x] Implement server action route returning status JSON (AC: 7) [Source: architecture/server-actions-architecture.md#main-scan-function]
- [x] Verify project runs locally (AC: 6)
  - [x] `pnpm dev` runs without errors; homepage renders (AC: 6)

## Dev Notes
- Technical Stack and expectations:
  - Next.js 14+ with App Router; TypeScript required [Source: architecture/technical-stack.md#frontend-technologies]
  - Tailwind CSS for UI styling [Source: architecture/technical-stack.md#frontend-technologies]
  - Package manager is pnpm; linting with ESLint; formatting with Prettier [Source: architecture/technical-stack.md#development-tools]
- File structure to target when scaffolding:
  - See defined structure for `app/`, `components/`, `lib/`, `lib/actions`, `lib/scanners`, `lib/utils`, and `app/api/health/route.ts` [Source: architecture/file-structure.md]
- Server actions guidance for API routes:
  - Health route should be at `app/api/health/route.ts` returning 200 and status JSON [Source: architecture/testing-strategy.md#api-health-route-appapihealthroutets]
- Testing guidance (for future stories implementing code):
  - Use Vitest; unit tests live under `tests/**` with the provided structure and coverage targets [Source: architecture/testing-strategy.md#approach-tooling]

## Testing
- Manual verification for this story:
  - `pnpm install` and `pnpm dev` start server without errors
  - Navigate to `/api/health` and confirm JSON response `{ status: 'ok' }` or equivalent
- Automated tests are not required for scaffolding but must be added when implementing libraries and routes in later stories per testing strategy [Source: architecture/testing-strategy.md]

## Change Log
| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |
| 2025-08-25 | 0.1 | Initial draft created from PRD and architecture references | Scrum Master |

## Dev Agent Record

### Agent Model Used
- **Agent**: James (Full Stack Developer)
- **Model**: Claude Sonnet 4
- **Activation**: @bmad/dev.mdc

### Debug Log References
- **2025-01-27 20:02**: Successfully created Next.js 15.5.0 project with TypeScript and Tailwind CSS
- **2025-01-27 20:03**: Created required directory structure (components/, lib/actions/, lib/scanners/, lib/utils/, app/api/health/)
- **2025-01-27 20:04**: Implemented health check API route at `/api/health` returning `{"status": "ok"}`
- **2025-01-27 20:05**: Added Prettier configuration and updated package.json scripts
- **2025-01-27 20:06**: Verified local development server runs successfully with `pnpm dev`
- **2025-01-27 20:07**: Health endpoint tested and confirmed working correctly

### Completion Notes List
- ✅ Next.js 15.5.0 project initialized with App Router and TypeScript
- ✅ Tailwind CSS configured and working
- ✅ Project structure created per requirements (app/, components/, lib/actions/, lib/scanners/, lib/utils/)
- ✅ Health check API route implemented at `/api/health` returning JSON status
- ✅ Package.json configured with pnpm, ESLint, and Prettier
- ✅ Git repository already initialized with appropriate .gitignore
- ✅ Local development server (`pnpm dev`) runs successfully
- ⚠️ Production build has React 19 compatibility issue (useRef error) - development mode works correctly

### File List
**New Files Created:**
- `app/api/health/route.ts` - Health check API endpoint
- `.prettierrc` - Prettier configuration
- `package.json` - Updated with project dependencies and scripts
- `tsconfig.json` - TypeScript configuration
- `next.config.ts` - Next.js configuration
- `eslint.config.mjs` - ESLint configuration
- `postcss.config.mjs` - PostCSS configuration
- `tailwind.config.ts` - Tailwind CSS configuration
- `app/layout.tsx` - Root layout component
- `app/page.tsx` - Homepage component
- `app/globals.css` - Global styles with Tailwind

**Directories Created:**
- `components/` - Component directory
- `lib/actions/` - Server actions directory
- `lib/scanners/` - Scanner utilities directory
- `lib/utils/` - Utility functions directory
- `app/api/health/` - Health API route directory

**Existing Files Preserved:**
- `docs/` - Documentation directory
- `.bmad-core/` - BMAD configuration
- `.cursor/` - Cursor IDE configuration
- `README.md` - Project documentation

### Change Log
| Date | Version | Description | Author |
| ---- | ------- | ----------- | ------ |
| 2025-01-27 | 0.2 | Story implementation completed - Next.js project setup with all requirements met | James (Dev Agent) |

### Status
Done

## QA Results

### Review Date: 2025-01-27

### Reviewed By: Quinn (Test Architect)

**Quality Gate Decision: PASS** ✅

**Summary:** Story 1.1 successfully meets all acceptance criteria for project setup and Next.js foundation. The implementation demonstrates solid technical foundation with proper project structure, TypeScript configuration, and functional health check endpoint.

**Key Findings:**
- ✅ All 7 acceptance criteria fully satisfied
- ✅ Next.js 15.5.0 with App Router properly configured
- ✅ TypeScript, Tailwind CSS, and development tools correctly set up
- ✅ Project structure follows architectural requirements
- ✅ Health check API route functional at `/api/health`
- ✅ Local development environment working correctly

**Minor Note:** Production build shows React 19 compatibility warning (useRef error) but doesn't affect development functionality or story completion.

**Recommendation:** Proceed to next story. Monitor React 19 compatibility for future production deployments.

### Gate Status

Gate: PASS → docs/qa/gates/epic-1.1-project-setup-and-nextjs-foundation.yml
